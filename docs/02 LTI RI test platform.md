# LTI RI test platform

Log in and follow instructions at <https://lti-ri.imsglobal.org>

## Step 1: Generate public / private key pair

## Step 2: Create Platform (LMS)

- Name: `ubc-ipeer-lti13-test-platform`
- Client: `ipeer-lti13-001` (1)
- Audience: `https://lti-ri.imsglobal.org`
- Tool Deep Link Service Endpoint: blank

Platform Public Key:

```
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxDOciJB09I+SWL6fZsP+
kqT6WwB9WA9fxkKImI8yLzTulqZ/ToK4UY1NVl5Tfw8vU5GIyvrNuG+RxBvvDtAr
pUkvNwPjeYUY2fiKZ2gR90Wie8/xLq8AslZmg96Z4KMiH04pJVek959X14etcUTh
IBDlZM5nXwyaOle/R7ZKO+G0snzYit//lUkQAcEq1cZNATGOl1vM8rVPD6L9yRe6
9VhpqdWpk8eO55QWRstV57h/oZpXQbv+K7t3T4z+BLQxMzVCdEYEOKm6sEHSzzU+
ThmZOBFChju/szzo/Q+gs8jpWAZ+yjoe/Sv+JiMqxcom4mu0nNxX1XsOsuOrMT4N
OQIDAQAB
-----END PUBLIC KEY-----
```

Platform Private Key:

```
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAyIMNVVvU5ylMosxMn4Ub8J1wXzK7NA60Xf+eWOSMgkqqk2NK
tRX03B9uxYL+YYy3pOWK6w07+VDlLF/uJ9knlXNoAHjQh3r+GZKobBSa7ZK1aSEd
i1IFNEACdyY+bhlXuK4RqcN2/r1IQzjnmCUQMLAXFBFhpwI2oTBuhkrmKJDwW+OS
oZR3W93vWSqDXibLAQ0EYqxdwCXjF61DxKaspNUvl5SQ65PvWlxwqMy6hCXhh5p4
4i7+6K1QStzBDTmlK4ZIr/RZvHmUaUXIfGqjmbQRo1I4bSWMHTDwowlqC74NDZiR
uLMk0fkHl1oYFSHNjgkAj6ajegXKX+rul+8zQwIDAQABAoIBAEyXkt5KR9dNNVLy
i0pcBEIzQZt7u3q1KzzEye3Wz71tXB8UzJLDolb7Qsr7sMP+hp/cduY2lfQ0bHY4
5rYeAzrZbJ7Rh4ZY+vs1xFQUwuGBKv7PgYOYfxhoYwi0eSCBWbrX8zNP0QKZtyLG
d+DsN3UBrq8hvJWZCNklsPJnZeeUWH7pA0G2H65hmaAOEaaksBhDg5UboyI5Tn3y
sfpkBbchM0JVxh1w1k9URJxRdnm/vOmQ4v3r+aFHF6xIyWhCw2SIfXIDXP51IgDb
mzMbAY43uyK43aoowO92B/PNvFpL+TZR0v6F7Ip+Ra8yBAeoKqs0ymlz+Jdovpip
st3+vLECgYEA77G8VvPhPdn7Z9gvcNpwVhwdYZRVIM6Fj1f+MPpIuxgokjC8tIhV
d2n5HeiyArWPpo6oJOqSAmNs2tqts73VU0oKunu8sNyB8LWQrM6RIw4HNbFKlGtJ
+e0XkhTDT67PKRC6zVOyMHtWs64Xd2LR5GTC2G/HGcpOe98pgCORlrUCgYEA1ib1
H6GUCpB+vjeKQtXyjtvb+6TZ7NBI4wDkzVLiouDti+t8Srb8aRbKkQV0/F7qbNzJ
NqFq9wbJ3gRAvwyiWtiWTqIo/DLrjClfdCsd/V+L9U0vaovtFl4/8rvIe+trknZc
s1A8QUE7mDoXIkO0aNSGlcQkJ4rt6fdQWyvYpRcCgYEAyFgs7hjmeYZLhp7B+Hf8
UV0qibcr+EHmjMuloVZxmEA3GQo3kEYr+aXQHVm0AGO1cCfpDwIpjGmCQONrMMNJ
HVbT5M8sBkApNALurCH0WfKNwCkyByAuMwIjI2zLWzzn1pEvMhP06mUNMR4gax9k
BJzb54B2UG4yb4M18u7H78kCgYBouZprwodz9x+UA/MgJiI9DHVyhTZxIZZTNI+v
fRYJ0vc30ovwubWL6rJa4xFHjV8Up4/aoGt/rBkx8mB7TUFkLcCraY+jbX9VBrKA
S8mZq4z1A67pas4hfyvEl2I+f20Wrb09j0I4Ix9ynQ3NGtDx5uR9/vIzSDR6kw//
1dxXNwKBgAzbqBp7YpIfdrYC3QB7RqExQVce/Sec/XzansmNztG2s4C3K+UinZ9t
Y0HjvJKnQ4gqnxAQy4prv5F+KWg4SK/e4IBtzEwI5QR/Ui5Qj/ZT0NGQgYnJv0pp
blAXTJZfcNM77IeL8zJyFnqUPozrQQrGzjDrDIuaXB+eEWIez2Xu
-----END RSA PRIVATE KEY-----
```

Tool public key:

```
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzQucD0xPYbqYdUMzE5jT
/WVCGKqtSBekmVWJaa+rZ8IR8C7Wi0orylend4s6+9IIpQ9xFWyIOFGb7at+ktXT
L163PwiZReq8NxkpZG3Pq2PZ6LiD1CKmG/1oB+RFoFh/0+cIK4twsw7MdvM8hGJg
VMwjo/oIYRZPy2j4aJ+NkKMWQu2EhQmG1wg1QERMPU8Dk6yJ5QwGUwyYGTO1hjKQ
Bh5EK/sAa1uH/LznPVxxs6FG5m821e1KUwKdTiZ0UdUj1O9Sv0ZMt9bZ+QM/xns6
VClZQkx+dHo4yhNlfDYSldll9ASyrOxuMWxfYpxCilifmxSebnyAh8cTN7t4G5Qi
wQIDAQAB
-----END PUBLIC KEY-----
```

> After Save, the platform URL is: <https://lti-ri.imsglobal.org/platforms/652>

## Step 3: Add Deployment to Platform

- Name: `Key 1`
- Deployment ID: `1` (3)

## Step 4: Add a Tool

- Name: `ubc-ipeer-lti13-test-tool`
- Client: `ipeer-lti13-001` (1)
    - OAuth2 client id, same value as Platform Client ID above: `ipeer-lti13-001`
- Deployment: `1` (3)
    - same value as Platform Deployment ID above: `1`
- Keyset url: `https://lti-ri.imsglobal.org/platforms/652/platform_keys/654.json`
- Oauth2 url: `https://lti-ri.imsglobal.org/platforms/652/access_tokens`
- Platform oidc auth url: `https://lti-ri.imsglobal.org/platforms/652/authorizations/new`

Tool private key:

```
-----BEGIN RSA PRIVATE KEY-----
MIIEogIBAAKCAQEAzKdGIHglhrDd2QxC/wXOgU/a1BcR92O76g8BnIqAvjbc2ZXh
acAsWVLn5MFHfkOllXD3zw/+y61yFWVoW8zee2BxS/9rfuCCgz9QRXi+E+QBWTQ6
hPUklgmlLvgjuoGyVN+tDgkE7Reo1Ew5I8xN5pTsaDXAc1bvgN7AKgw4TVGTyjoc
jNkDLc3MSc8jwqs7NcgTOFw/oatDd1iSVfx2TmmLrJfE1VXFKJSw6/cF9+6+dWJ2
bCjNH8e004zs5W151DsPF60QKcNHDa+yJbrJPiJvH7rzw36XKhRKtPowydaG7pPx
k5vFmA1yiqQJUHhFchOJJl/l35RRwRtJzsX5nQIDAQABAoIBAHU9PodLTPQkTnMQ
+zBteyfJP2tQ7BH1KKmlfx7WmXpeo5ZiroeOd9mUDRSXRQWoayt5U/1jBGxaKIjp
Vyd/7dRwI3eOE17T7vCRTML/sKRkcgFQUlXoudTaIa8OqCkoM6k7mj/4GsJYU3eL
UxCW8emuVuA8Ksvoebwx35Q2++oOUmqs6EQKBLJTV72RgFKgCRT7VFC24mMP3GCl
LBJeUzOQgHSy6Ere26WmckaU9azCQzmZxKYaD/ITpm5f1F1oRYFYpP+/bOMFRPAO
95nNm933/89pIDpc8UrZP/OSwLbuDWML8Tf82kAmoHy0ReSPXetN1BObTwXCBp6C
Z4U/1gECgYEA+swpoUdfcQlOkF2LO3g7p16qs7BqsGX1Q7RzlYWpUhGLU7E5NAj2
bi1ADVh6hGgMe6hDv0eGhI0r7eCLKl/J0as2LK++HF8bTjHt3oewp9wFwq3RXmR5
qzNgAoRcRRHJjx8+crQ07+WVsZr3EbTbCsrXwtGsHDpNziAtcsI181ECgYEA0OYR
OaRgCWmOYnuqv0vMEWDuScr2gJnLDxYSVyaNCPNBeJZgKwZBSw8sG/ybreYgcoFt
D2ehGMJeg8kECEFB4nZh9PM447zJMWPGyv5ImvMF8RJx2aSkufGBNGkAoDYRaV/F
gsX+r1CZrdI9uTKgGnNwzQfYsxwFrgKCxexGFo0CgYAsLy/eZA6igXs/39sZvRL1
Z643PgttzGirZu0+GHA+Ly0Wr5BeZH3V507zivT6wsIAPyLAXj+KtrxYiki6TGnn
8Hv433Vk1jSfUBiSLeGnkRHKvIi4UodE7CYsC1meKYYTGvQLjUgOQ6pdwelpSy2T
9yyP/BSQXI08lVqsbx7GIQKBgCxH2HbjhQf5vBjcJgGOy58TcO9ren0gHI8CGrkm
jtbK2aH6HkCAfu6uNKdqEIX4NgCPttKBIQDikq5UueoWCyU5+uG1fOWpauxxPf5h
kHpn8WZ8hm2gHNrdeonliCBt1ZsElhV2ato2t5zE6BiNxqpUtiB//UtaMUoFdjsG
LoUxAoGAYQXIQYcqni2jTgsBLj2l7YxtPUtHmrNBaAtone152ZH8YCIoWD63I56X
16tiVNr4WqYIdOpX/aiVYn3xyznth8HMurgRgfoZBynZ/MXHpstQhpn9GubcOYDJ
aSljUSiLR/SftwRqEz1CYEs6cP1T451/h270kpCrva6x0JUx1DM=
-----END RSA PRIVATE KEY-----
```

> After Save, the tool URL is: <https://lti-ri.imsglobal.org/lti/tools/652>

## Step 5: In Platform tab, view your Platform

### 5.1 Add course

<https://lti-ri.imsglobal.org/platforms/652/contexts>

- Label: `Test iPeer course label`
- Title: `Test iPeer course title`
- Type of context: `Test iPeer course type`

### 5.5 Add resource links

<https://lti-ri.imsglobal.org/platforms/652/resource_links/new>

- Context: `Test iPeer course title`
- Title: `Test iPeer resource link title` (4)
- Description: `Test iPeer resource link description`
- Tool link url: `http://localhost:8080/lti13/launch` (2)
    - URL for a local iPeer installation using the LtiController route
- Login initiation url: `http://localhost:8080/lti13/login`
- Role: blank
- User identifier only for launch, no PII such as first name, email etc.: OFF
- Custom claim content: blank

### 5.11 Add course line item

<https://lti-ri.imsglobal.org/platforms/652/contexts/4287/line_items/new>

- Resource link: `Test iPeer resource link title` _10261_ (4)
- Resourceid: `1`
- Score maximum: `100`
- Label: `Line item 1 label`
- Tag: `Line item 1 tag`
- Start date time: `2019-12-10`
- End date time: `2020-12-10`

### 5.17 Add launch URL

<https://lti-ri.imsglobal.org/platforms/652/edit>

- Tool Deep Link Service Endpoint: `http://localhost:8080/lti13/launch` (2)

### 5.20 Add user for launch

<https://lti-ri.imsglobal.org/platforms/652/resource_links/10261/rosters>

Prepare localhost iPeer:

```bash
cd ~/Code/ctlt/iPeer
docker-compose up -d
```

- Select first user's "Launch Resource Link (OIDC)" button.
- Click "Post request" button.

The browser goes to <http://localhost:8080/home>

```
Error: You do not have permission to access the page.
```
